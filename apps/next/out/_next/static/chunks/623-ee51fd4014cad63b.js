"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{43426:function(t,e,i){i.d(e,{m:function(){return s}});let s=i(7653).createContext({toggle:()=>{},set:t=>{},themes:[]})},9915:function(t,e,i){i.d(e,{U:function(){return n}});var s=i(7653),r=i(84357);let n=({fallback:t="light"}={})=>{let e=t;if(r.C5){let i=[...document.documentElement.classList];e=i.includes("t_dark")?"dark":i.includes("t_light")?"light":t}return s.useState(e)}},81695:function(t,e,i){var s=i(21219);i.o(s,"usePathname")&&i.d(e,{usePathname:function(){return s.usePathname}}),i.o(s,"useRouter")&&i.d(e,{useRouter:function(){return s.useRouter}}),i.o(s,"useSearchParams")&&i.d(e,{useSearchParams:function(){return s.useSearchParams}}),i.o(s,"useServerInsertedHTML")&&i.d(e,{useServerInsertedHTML:function(){return s.useServerInsertedHTML}})},54505:function(t,e,i){i.d(e,{getLocales:function(){return o}});let s=["ar","ckb","fa","he","ks","lrc","mzn","ps","ug","ur","yi"];function r(t){return"419"===t?"UN":t.toUpperCase()}function n(t){let[e="en",i]=t.split("-");return{languageCode:e,countryCode:i}}function o(){let{languages:t=[navigator.language]}=navigator,e=function(){let{languages:t=[navigator.language]}=navigator;for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;let{countryCode:s}=n(i);if(s)return r(s)}return"US"}(),i=[],o=[];return t.forEach(t=>{let a=function(t,e){let{languageCode:i,countryCode:o}=n(t);return{languageCode:i=i.toLowerCase(),countryCode:o=r(o||e),languageTag:`${i}-${o}`,isRTL:s.includes(i)}}(t,e);-1===i.indexOf(a.languageTag)&&(o.push(a),i.push(a.languageTag))}),o}},72401:function(t,e,i){let s;i.d(e,{XA:function(){return c}});var r=i(3035),n=i(22113),o=i(7653),a=i(76414),h=i(3458),l=i(27573);let u="dismissable.update",d=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),c=o.forwardRef((t,e)=>{let{disableOutsidePointerEvents:i=!1,forceUnmount:h,onEscapeKeyDown:c,onPointerDownOutside:v,onFocusOutside:g,onInteractOutside:m,onDismiss:y,...S}=t,b=o.useContext(d),[L,w]=o.useState(null),[,x]=o.useState({}),z=(0,r.ex)(e,t=>w(t)),E=Array.from(b.layers),[k]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),_=E.indexOf(k),T=L?E.indexOf(L):-1,A=b.layersWithOutsidePointerEventsDisabled.size>0,F=T>=_,C=function(t){let e=(0,a.z)(t),i=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{let t=t=>{if(t.target&&!i.current){let i=function(){p("dismissable.pointerDownOutside",e,r,{discrete:!0})},r={originalEvent:t};"touch"===t.pointerType?(document.removeEventListener("click",s.current),s.current=i,document.addEventListener("click",s.current,{once:!0})):i()}i.current=!1},r=setTimeout(()=>{document.addEventListener("pointerdown",t)},0);return()=>{window.clearTimeout(r),document.removeEventListener("pointerdown",t),document.removeEventListener("click",s.current)}},[e]),{onPointerDownCapture:()=>{i.current=!0}}}(t=>{let e=t.target,i=[...b.branches].some(t=>t.contains(e));!F||i||(v?.(t),m?.(t),t.defaultPrevented||y?.())}),D=function(t){let e=(0,a.z)(t),i=o.useRef(!1);return o.useEffect(()=>{let t=t=>{t.target&&!i.current&&p("dismissable.focusOutside",e,{originalEvent:t},{discrete:!1})};return document.addEventListener("focusin",t),()=>document.removeEventListener("focusin",t)},[e]),{onFocusCapture:()=>{i.current=!0},onBlurCapture:()=>{i.current=!1}}}(t=>{let e=t.target;[...b.branches].some(t=>t.contains(e))||(g?.(t),m?.(t),t.defaultPrevented||y?.())});return function(t,e=globalThis?.document){let i=function(t){let e=o.useRef(t);return o.useEffect(()=>{e.current=t}),o.useMemo(()=>(...t)=>e.current?.(...t),[])}(t);o.useEffect(()=>{let t=t=>{"Escape"===t.key&&i(t)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},[i,e])}(t=>{T===b.layers.size-1&&(c?.(t),!t.defaultPrevented&&y&&(t.preventDefault(),y()))}),o.useEffect(()=>{if(L)return i&&(0===b.layersWithOutsidePointerEventsDisabled.size&&(s=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(L)),b.layers.add(L),f(),()=>{i&&1===b.layersWithOutsidePointerEventsDisabled.size&&(document.body.style.pointerEvents=s)}},[L,i,b]),o.useEffect(()=>{if(!h)return()=>{L&&(b.layers.delete(L),b.layersWithOutsidePointerEventsDisabled.delete(L),f())}},[L,b,h]),o.useEffect(()=>{let t=()=>{x({})};return document.addEventListener(u,t),()=>document.removeEventListener(u,t)},[]),(0,l.jsx)("div",{...S,ref:z,style:{display:"contents",pointerEvents:A?F?"auto":"none":void 0,...t.style},onFocusCapture:(0,n.Mj)(t.onFocusCapture,D.onFocusCapture),onBlurCapture:(0,n.Mj)(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:(0,n.Mj)(t.onPointerDownCapture,C.onPointerDownCapture)})});function f(){let t=new CustomEvent(u);document.dispatchEvent(t)}function p(t,e,i,{discrete:s}){let r=i.originalEvent.target,n=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});e&&r.addEventListener(t,e,{once:!0}),s?r&&h.flushSync(()=>r.dispatchEvent(n)):r.dispatchEvent(n)}c.displayName="Dismissable",o.forwardRef((t,e)=>{let i=o.useContext(d),s=o.useRef(null),n=(0,r.ex)(e,s);return o.useEffect(()=>{let t=s.current;if(t)return i.branches.add(t),()=>{i.branches.delete(t)}},[i.branches]),(0,l.jsx)("div",{style:{display:"contents"},...t,ref:n})}).displayName="DismissableBranch"},70572:function(t,e,i){i.d(e,{e7:function(){return d},Py:function(){return l},JW:function(){return u}});var s=i(44894),r=i(7653);let n=(t,{message:e,notificationOptions:i})=>{if(!("Notification"in window))return console.error("This browser does not support notifications"),!1;Notification.permission;let s=()=>new Notification(t,{body:e,...i});return"granted"===Notification.permission?{nativeToastRef:s()}:(Notification.requestPermission().then(t=>{if("granted"===t)return{nativeToastRef:s()}}),!0)};var o=i(27573);let a=r.createContext({}),h=r.createContext(null),l=()=>r.useContext(a),u=()=>r.useContext(h),d=({children:t,options:e})=>{let i=r.useRef(0),[l,u]=r.useState(null),[d,c]=r.useState(null),f=r.useCallback((t,r)=>{let o=r?.native??e.native,a=Array.isArray(o)?o.includes("web"):"web"===o,h=Array.isArray(o)?o.includes("mobile"):"mobile"===o,l=h||(Array.isArray(o)?o.includes("android"):"android"===o),d=h||(Array.isArray(o)?o.includes("ios"):"ios"===o),f=!0===o||s.isWeb&&a||!s.isWeb&&h||s.isAndroid&&l||s.isIos&&d;if(f){let e=n(t,r??{});"object"==typeof e&&e.nativeToastRef&&c(e.nativeToastRef)}return i.current++,u({...r?.customData,...r,viewportName:r?.viewportName??"default",title:t,id:i.current.toString(),isHandledNatively:f}),!0},[u,JSON.stringify(e.native||null)]),p=r.useCallback(()=>{d?.close(),u(t=>t?{...t,hide:!0}:null),setTimeout(()=>{u(null)},100)},[u,d]),v=r.useMemo(()=>({show:f,hide:p,nativeToast:d,options:e}),[f,p,d,JSON.stringify(e||null)]);return(0,o.jsx)(a.Provider,{value:v,children:(0,o.jsx)(h.Provider,{value:l,children:t})})}},68715:function(t,e,i){i.d(e,{T:function(){return r}});var s=i(37203);let r=(0,s.styled)(s.Text,{position:"absolute",width:1,height:1,margin:-1,zIndex:-1e4,overflow:"hidden",opacity:1e-8,pointerEvents:"none",variants:{preserveDimensions:{true:{position:"relative",width:"auto",height:"auto"}},visible:{true:{position:"relative",width:"auto",height:"auto",margin:0,zIndex:1,overflow:"visible",opacity:1,pointerEvents:"auto"}}}});r.isVisuallyHidden=!0},26066:function(t,e,i){function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)t[s]=i[s]}return t}i.d(e,{Z:function(){return r}});var r=function t(e,i){function r(t,r,n){if("undefined"!=typeof document){"number"==typeof(n=s({},i,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in n)n[a]&&(o+="; "+a,!0!==n[a]&&(o+="="+n[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var i=document.cookie?document.cookie.split("; "):[],s={},r=0;r<i.length;r++){var n=i[r].split("="),o=n.slice(1).join("=");try{var a=decodeURIComponent(n[0]);if(s[a]=e.read(o,a),t===a)break}catch(t){}}return t?s[t]:s}},remove:function(t,e){r(t,"",s({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,s({},this.attributes,e))},withConverter:function(e){return t(s({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},54594:function(t,e,i){i.d(e,{z:function(){return v}});var s=i(74859);let r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,n=new Set,o="object"==typeof s&&s?s:{},a=(t,e,i,s)=>{"function"==typeof o.emitWarning?o.emitWarning(t,e,i,s):console.error(`[${i}] ${e}: ${t}`)},h=globalThis.AbortController,l=globalThis.AbortSignal;if(void 0===h){l=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},h=class{constructor(){e()}signal=new l;abort(t){if(!this.signal.aborted){for(let e of(this.signal.reason=t,this.signal.aborted=!0,this.signal._onabort))e(t);this.signal.onabort?.(t)}}};let t=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,a("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}let u=t=>!n.has(t);Symbol("type");let d=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),c=t=>d(t)?t<=256?Uint8Array:t<=65536?Uint16Array:t<=4294967296?Uint32Array:t<=Number.MAX_SAFE_INTEGER?f:null:null;class f extends Array{constructor(t){super(t),this.fill(0)}}class p{heap;length;static #t=!1;static create(t){let e=c(t);if(!e)return[];p.#t=!0;let i=new p(t,e);return p.#t=!1,i}constructor(t,e){if(!p.#t)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class v{#e;#i;#s;#r;#n;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#h;#l;#u;#d;#c;#f;#p;#v;#g;#m;#y;#S;#b;#L;#w;#x;static unsafeExposeInternals(t){return{starts:t.#S,ttls:t.#b,sizes:t.#y,keyMap:t.#l,keyList:t.#u,valList:t.#d,next:t.#c,prev:t.#f,get head(){return t.#p},get tail(){return t.#v},free:t.#g,isBackgroundFetch:e=>t.#z(e),backgroundFetch:(e,i,s,r)=>t.#E(e,i,s,r),moveToTail:e=>t.#k(e),indexes:e=>t.#_(e),rindexes:e=>t.#T(e),isStale:e=>t.#A(e)}}get max(){return this.#e}get maxSize(){return this.#i}get calculatedSize(){return this.#h}get size(){return this.#a}get fetchMethod(){return this.#n}get memoMethod(){return this.#o}get dispose(){return this.#s}get disposeAfter(){return this.#r}constructor(t){let{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:h,allowStale:l,dispose:f,disposeAfter:g,noDisposeOnSet:m,noUpdateTTL:y,maxSize:S=0,maxEntrySize:b=0,sizeCalculation:L,fetchMethod:w,memoMethod:x,noDeleteOnFetchRejection:z,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:_,ignoreFetchAbort:T}=t;if(0!==e&&!d(e))throw TypeError("max option must be a nonnegative integer");let A=e?c(e):Array;if(!A)throw Error("invalid max value: "+e);if(this.#e=e,this.#i=S,this.maxEntrySize=b||this.#i,this.sizeCalculation=L,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==x&&"function"!=typeof x)throw TypeError("memoMethod must be a function if defined");if(this.#o=x,void 0!==w&&"function"!=typeof w)throw TypeError("fetchMethod must be a function if specified");if(this.#n=w,this.#w=!!w,this.#l=new Map,this.#u=Array(e).fill(void 0),this.#d=Array(e).fill(void 0),this.#c=new A(e),this.#f=new A(e),this.#p=0,this.#v=0,this.#g=p.create(e),this.#a=0,this.#h=0,"function"==typeof f&&(this.#s=f),"function"==typeof g?(this.#r=g,this.#m=[]):(this.#r=void 0,this.#m=void 0),this.#L=!!this.#s,this.#x=!!this.#r,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!z,this.allowStaleOnFetchRejection=!!k,this.allowStaleOnFetchAbort=!!_,this.ignoreFetchAbort=!!T,0!==this.maxEntrySize){if(0!==this.#i&&!d(this.#i))throw TypeError("maxSize must be a positive integer if specified");if(!d(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#F()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!h,this.ttlResolution=d(s)||0===s?s:1,this.ttlAutopurge=!!r,this.ttl=i||0,this.ttl){if(!d(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#C()}if(0===this.#e&&0===this.ttl&&0===this.#i)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#i){let t="LRU_CACHE_UNBOUNDED";u(t)&&(n.add(t),a("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,v))}}getRemainingTTL(t){return this.#l.has(t)?1/0:0}#C(){let t=new f(this.#e),e=new f(this.#e);this.#b=t,this.#S=e,this.#D=(i,s,n=r.now())=>{if(e[i]=0!==s?n:0,t[i]=s,0!==s&&this.ttlAutopurge){let t=setTimeout(()=>{this.#A(i)&&this.#O(this.#u[i],"expire")},s+1);t.unref&&t.unref()}},this.#R=i=>{e[i]=0!==t[i]?r.now():0},this.#M=(r,n)=>{if(t[n]){let o=t[n],a=e[n];if(!o||!a)return;r.ttl=o,r.start=a,r.now=i||s();let h=r.now-a;r.remainingTTL=o-h}};let i=0,s=()=>{let t=r.now();if(this.ttlResolution>0){i=t;let e=setTimeout(()=>i=0,this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=r=>{let n=this.#l.get(r);if(void 0===n)return 0;let o=t[n],a=e[n];return o&&a?o-((i||s())-a):1/0},this.#A=r=>{let n=e[r],o=t[r];return!!o&&!!n&&(i||s())-n>o}}#R=()=>{};#M=()=>{};#D=()=>{};#A=()=>!1;#F(){let t=new f(this.#e);this.#h=0,this.#y=t,this.#W=e=>{this.#h-=t[e],t[e]=0},this.#B=(t,e,i,s)=>{if(this.#z(e))return 0;if(!d(i)){if(s){if("function"!=typeof s)throw TypeError("sizeCalculation must be a function");if(!d(i=s(e,t)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return i},this.#I=(e,i,s)=>{if(t[e]=i,this.#i){let i=this.#i-t[e];for(;this.#h>i;)this.#P(!0)}this.#h+=t[e],s&&(s.entrySize=i,s.totalCalculatedSize=this.#h)}}#W=t=>{};#I=(t,e,i)=>{};#B=(t,e,i,s)=>{if(i||s)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#v;this.#U(e)&&((t||!this.#A(e))&&(yield e),e!==this.#p);)e=this.#f[e]}*#T({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#p;this.#U(e)&&((t||!this.#A(e))&&(yield e),e!==this.#v);)e=this.#c[e]}#U(t){return void 0!==t&&this.#l.get(this.#u[t])===t}*entries(){for(let t of this.#_())void 0===this.#d[t]||void 0===this.#u[t]||this.#z(this.#d[t])||(yield[this.#u[t],this.#d[t]])}*rentries(){for(let t of this.#T())void 0===this.#d[t]||void 0===this.#u[t]||this.#z(this.#d[t])||(yield[this.#u[t],this.#d[t]])}*keys(){for(let t of this.#_()){let e=this.#u[t];void 0===e||this.#z(this.#d[t])||(yield e)}}*rkeys(){for(let t of this.#T()){let e=this.#u[t];void 0===e||this.#z(this.#d[t])||(yield e)}}*values(){for(let t of this.#_())void 0===this.#d[t]||this.#z(this.#d[t])||(yield this.#d[t])}*rvalues(){for(let t of this.#T())void 0===this.#d[t]||this.#z(this.#d[t])||(yield this.#d[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let i of this.#_()){let s=this.#d[i],r=this.#z(s)?s.__staleWhileFetching:s;if(void 0!==r&&t(r,this.#u[i],this))return this.get(this.#u[i],e)}}forEach(t,e=this){for(let i of this.#_()){let s=this.#d[i],r=this.#z(s)?s.__staleWhileFetching:s;void 0!==r&&t.call(e,r,this.#u[i],this)}}rforEach(t,e=this){for(let i of this.#T()){let s=this.#d[i],r=this.#z(s)?s.__staleWhileFetching:s;void 0!==r&&t.call(e,r,this.#u[i],this)}}purgeStale(){let t=!1;for(let e of this.#T({allowStale:!0}))this.#A(e)&&(this.#O(this.#u[e],"expire"),t=!0);return t}info(t){let e=this.#l.get(t);if(void 0===e)return;let i=this.#d[e],s=this.#z(i)?i.__staleWhileFetching:i;if(void 0===s)return;let n={value:s};if(this.#b&&this.#S){let t=this.#b[e],i=this.#S[e];if(t&&i){let e=t-(r.now()-i);n.ttl=e,n.start=Date.now()}}return this.#y&&(n.size=this.#y[e]),n}dump(){let t=[];for(let e of this.#_({allowStale:!0})){let i=this.#u[e],s=this.#d[e],n=this.#z(s)?s.__staleWhileFetching:s;if(void 0===n||void 0===i)continue;let o={value:n};if(this.#b&&this.#S){o.ttl=this.#b[e];let t=r.now()-this.#S[e];o.start=Math.floor(Date.now()-t)}this.#y&&(o.size=this.#y[e]),t.unshift([i,o])}return t}load(t){for(let[e,i]of(this.clear(),t)){if(i.start){let t=Date.now()-i.start;i.start=r.now()-t}this.set(e,i.value,i)}}set(t,e,i={}){if(void 0===e)return this.delete(t),this;let{ttl:s=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=i,{noUpdateTTL:h=this.noUpdateTTL}=i,l=this.#B(t,e,i.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#O(t,"set"),this;let u=0===this.#a?void 0:this.#l.get(t);if(void 0===u)u=0===this.#a?this.#v:0!==this.#g.length?this.#g.pop():this.#a===this.#e?this.#P(!1):this.#a,this.#u[u]=t,this.#d[u]=e,this.#l.set(t,u),this.#c[this.#v]=u,this.#f[u]=this.#v,this.#v=u,this.#a++,this.#I(u,l,a),a&&(a.set="add"),h=!1;else{this.#k(u);let i=this.#d[u];if(e!==i){if(this.#w&&this.#z(i)){i.__abortController.abort(Error("replaced"));let{__staleWhileFetching:e}=i;void 0!==e&&!n&&(this.#L&&this.#s?.(e,t,"set"),this.#x&&this.#m?.push([e,t,"set"]))}else!n&&(this.#L&&this.#s?.(i,t,"set"),this.#x&&this.#m?.push([i,t,"set"]));if(this.#W(u),this.#I(u,l,a),this.#d[u]=e,a){a.set="replace";let t=i&&this.#z(i)?i.__staleWhileFetching:i;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===s||this.#b||this.#C(),this.#b&&(h||this.#D(u,s,r),a&&this.#M(a,u)),!n&&this.#x&&this.#m){let t;let e=this.#m;for(;t=e?.shift();)this.#r?.(...t)}return this}pop(){try{for(;this.#a;){let t=this.#d[this.#p];if(this.#P(!0),this.#z(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#x&&this.#m){let t;let e=this.#m;for(;t=e?.shift();)this.#r?.(...t)}}}#P(t){let e=this.#p,i=this.#u[e],s=this.#d[e];return this.#w&&this.#z(s)?s.__abortController.abort(Error("evicted")):(this.#L||this.#x)&&(this.#L&&this.#s?.(s,i,"evict"),this.#x&&this.#m?.push([s,i,"evict"])),this.#W(e),t&&(this.#u[e]=void 0,this.#d[e]=void 0,this.#g.push(e)),1===this.#a?(this.#p=this.#v=0,this.#g.length=0):this.#p=this.#c[e],this.#l.delete(i),this.#a--,e}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=e,r=this.#l.get(t);if(void 0!==r){let t=this.#d[r];if(this.#z(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#A(r))return i&&this.#R(r),s&&(s.has="hit",this.#M(s,r)),!0;s&&(s.has="stale",this.#M(s,r))}else s&&(s.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,s=this.#l.get(t);if(void 0===s||!i&&this.#A(s))return;let r=this.#d[s];return this.#z(r)?r.__staleWhileFetching:r}#E(t,e,i,s){let r=void 0===e?void 0:this.#d[e];if(this.#z(r))return r;let n=new h,{signal:o}=i;o?.addEventListener("abort",()=>n.abort(o.reason),{signal:n.signal});let a={signal:n.signal,options:i,context:s},l=(s,r=!1)=>{let{aborted:o}=n.signal,h=i.ignoreFetchAbort&&void 0!==s;return(i.status&&(o&&!r?(i.status.fetchAborted=!0,i.status.fetchError=n.signal.reason,h&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),!o||h||r)?(this.#d[e]===d&&(void 0===s?d.__staleWhileFetching?this.#d[e]=d.__staleWhileFetching:this.#O(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,s,a.options))),s):u(n.signal.reason)},u=s=>{let{aborted:r}=n.signal,o=r&&i.allowStaleOnFetchAbort,a=o||i.allowStaleOnFetchRejection,h=a||i.noDeleteOnFetchRejection;if(this.#d[e]!==d||(h&&void 0!==d.__staleWhileFetching?o||(this.#d[e]=d.__staleWhileFetching):this.#O(t,"fetch")),a)return i.status&&void 0!==d.__staleWhileFetching&&(i.status.returnedStale=!0),d.__staleWhileFetching;if(d.__returned===d)throw s};i.status&&(i.status.fetchDispatched=!0);let d=new Promise((e,s)=>{let o=this.#n?.(t,r,a);o&&o instanceof Promise&&o.then(t=>e(void 0===t?void 0:t),s),n.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(e(void 0),i.allowStaleOnFetchAbort&&(e=t=>l(t,!0)))})}).then(l,t=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=t),u(t))),c=Object.assign(d,{__abortController:n,__staleWhileFetching:r,__returned:void 0});return void 0===e?(this.set(t,c,{...a.options,status:void 0}),e=this.#l.get(t)):this.#d[e]=c,c}#z(t){return!!this.#w&&!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof h}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:c=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:v=!1,status:g,signal:m}=e;if(!this.#w)return g&&(g.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,status:g});let y={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:h,noUpdateTTL:l,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:f,ignoreFetchAbort:c,status:g,signal:m},S=this.#l.get(t);if(void 0===S){g&&(g.fetch="miss");let e=this.#E(t,S,y,p);return e.__returned=e}{let e=this.#d[S];if(this.#z(e)){let t=i&&void 0!==e.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}let r=this.#A(S);if(!v&&!r)return g&&(g.fetch="hit"),this.#k(S),s&&this.#R(S),g&&this.#M(g,S),e;let n=this.#E(t,S,y,p),o=void 0!==n.__staleWhileFetching&&i;return g&&(g.fetch=r?"stale":"refresh",o&&r&&(g.returnedStale=!0)),o?n.__staleWhileFetching:n.__returned=n}}async forceFetch(t,e={}){let i=await this.fetch(t,e);if(void 0===i)throw Error("fetch() returned undefined");return i}memo(t,e={}){let i=this.#o;if(!i)throw Error("no memoMethod provided to constructor");let{context:s,forceRefresh:r,...n}=e,o=this.get(t,n);if(!r&&void 0!==o)return o;let a=i(t,o,{options:n,context:s});return this.set(t,a,n),a}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:n}=e,o=this.#l.get(t);if(void 0!==o){let e=this.#d[o],a=this.#z(e);return(n&&this.#M(n,o),this.#A(o))?(n&&(n.get="stale"),a)?(n&&i&&void 0!==e.__staleWhileFetching&&(n.returnedStale=!0),i?e.__staleWhileFetching:void 0):(r||this.#O(t,"expire"),n&&i&&(n.returnedStale=!0),i?e:void 0):(n&&(n.get="hit"),a)?e.__staleWhileFetching:(this.#k(o),s&&this.#R(o),e)}n&&(n.get="miss")}#N(t,e){this.#f[e]=t,this.#c[t]=e}#k(t){t!==this.#v&&(t===this.#p?this.#p=this.#c[t]:this.#N(this.#f[t],this.#c[t]),this.#N(this.#v,t),this.#v=t)}delete(t){return this.#O(t,"delete")}#O(t,e){let i=!1;if(0!==this.#a){let s=this.#l.get(t);if(void 0!==s){if(i=!0,1===this.#a)this.#j(e);else{this.#W(s);let i=this.#d[s];if(this.#z(i)?i.__abortController.abort(Error("deleted")):(this.#L||this.#x)&&(this.#L&&this.#s?.(i,t,e),this.#x&&this.#m?.push([i,t,e])),this.#l.delete(t),this.#u[s]=void 0,this.#d[s]=void 0,s===this.#v)this.#v=this.#f[s];else if(s===this.#p)this.#p=this.#c[s];else{let t=this.#f[s];this.#c[t]=this.#c[s];let e=this.#c[s];this.#f[e]=this.#f[s]}this.#a--,this.#g.push(s)}}}if(this.#x&&this.#m?.length){let t;let e=this.#m;for(;t=e?.shift();)this.#r?.(...t)}return i}clear(){return this.#j("delete")}#j(t){for(let e of this.#T({allowStale:!0})){let i=this.#d[e];if(this.#z(i))i.__abortController.abort(Error("deleted"));else{let s=this.#u[e];this.#L&&this.#s?.(i,s,t),this.#x&&this.#m?.push([i,s,t])}}if(this.#l.clear(),this.#d.fill(void 0),this.#u.fill(void 0),this.#b&&this.#S&&(this.#b.fill(0),this.#S.fill(0)),this.#y&&this.#y.fill(0),this.#p=0,this.#v=0,this.#g.length=0,this.#h=0,this.#a=0,this.#x&&this.#m){let t;let e=this.#m;for(;t=e?.shift();)this.#r?.(...t)}}}}}]);